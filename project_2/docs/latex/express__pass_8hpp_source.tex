\doxysection{express\+\_\+pass.\+hpp}
\label{express__pass_8hpp_source}\index{C:/Hometasks/4\_course/HuaweiProject/algnet/project\_2/include/express\_pass.hpp@{C:/Hometasks/4\_course/HuaweiProject/algnet/project\_2/include/express\_pass.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}packet.hpp"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <random>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{class\ }ExpressPass\ \{}
\DoxyCodeLine{00008\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00009\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ min\_packet\_size\ =\ 84\ *\ 8;}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ default\_data\_size\ =\ 1024\ *\ 8;}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ target\_link\_speed\ =\ 50;}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ default\_credit\_rate\_limit\_ns\ =\ (default\_data\_size\ +\ target\_link\_speed\ -\/\ 1)\ /\ target\_link\_speed;\ \ \ }
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{comment}{//\ TODO:\ maybe\ should\ apply\ optimization\ which\ sends\ credits\ directly\ to\ link\ from\ receiver\ instead\ of\ pushing\ them\ to\ queue}}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{comment}{//\ Need\ to\ check\ this\ optimization\ when\ sending\ packets\ by\ all\ flows\ takes\ more\ time\ than\ inter\_credit\_gap}}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{//\ It\ seems\ like\ the\ behaviour\ will\ be\ correct\ (FIFO),\ but\ there\ is\ a\ little\ chance\ that\ such\ approach\ will\ break\ fairness}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ 200\ with\ correct\ value,\ corresponding\ to\ amount\ of\ flows\ (amount\_of\_flows\ /\ 10\ or\ smth\ instead\ of\ 200)}}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ default\_inter\_credit\_gap\_ns\ =\ 200\ *\ (min\_packet\_size\ +\ default\_data\_size\ +\ target\_link\_speed\ -\/\ 1)\ /\ target\_link\_speed;}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ default\_min\_jitter\ =\ (default\_inter\_credit\_gap\_ns\ +\ 99)\ /\ 100;}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::uint64\_t\ default\_max\_jitter\ =\ default\_min\_jitter\ *\ 8;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ ExpressPass()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00023\ \ \ \ \ std::uint64\_t\ getRandomJitter()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00024\ \ \ \ \ PacketHeader\ GetCredit(std::uint64\_t\ sending\_time,\ std::uint64\_t\ source,\ std::uint64\_t\ destination,\ std::uint64\_t\ size\ =\ min\_packet\_size)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00025\ \ \ \ \ PacketHeader\ GetHandshakePacket(std::uint64\_t\ sending\_time,\ std::uint64\_t\ source,\ std::uint64\_t\ destination,\ std::uint64\_t\ size\ =\ min\_packet\_size)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00026\ \ \ \ \ PacketHeader\ GetDataPacket(std::uint64\_t\ sending\_time,\ std::uint64\_t\ source,\ std::uint64\_t\ destination,\ std::uint64\_t\ size\ =\ default\_data\_size)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00027\ \};}

\end{DoxyCode}
